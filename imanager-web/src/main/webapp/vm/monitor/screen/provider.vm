<div class="col-md-12">
    <ol class="breadcrumb">
        <li class="active">${html_title}/服务者列表</li>
    </ol>
</div>
<div class="col-md-12">
    <ul id="myTab" class="nav nav-tabs">
        <li class="active">
            <a href="provider.htm" data-toggle="tab">
                服务者列表
            </a>
        </li>
        <li>
            <a href="consumer.htm" data-toggle="tab">
                消费者列表
            </a>
        </li>
    </ul>
    <div style="margin-top: 25px; padding-left: 15px;">
        <form class="form-inline" role="form" id="providerForm">
            <div class="form-group">
                <label class="control-label" for="serviceName">服务名：</label>
                <input type="text" class="form-control" id="serviceName" name="serviceName">
            </div>
            <div class="form-group">
                <label class="control-label" for="group">组：</label>
                <input type="text" class="form-control" id="group" name="group">
            </div>
            <button type="button" id="searchBtn" class="btn btn-info">搜索</button>
            <button type="button" id="resetBtn" class="btn btn-default">清空</button>
        </form>
    </div>

    <div style="margin-top: 20px;">
        <table id="providerTable" class="table table-bordered">
            <thead>
            <tr>
                <th>序号</th>
                <th>服务名</th>
                <th>版本</th>
                <th>组</th>
                <th>ip</th>
                <th>操作</th>
            </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
    </div>
</div>
<script type="text/template" id="providerTableTemplate">
    <% _.each(data, function(n,index) { %>
    <tr>
        <td><%= index+1 %></td>
        <td><%= n.interfaceName %></td>
        <td><%= n.version %></td>
        <td><%= n.group %></td>
        <td><%= n.ip %></td>
        <td>
            <button type="button" class="btn btn-xs btn-link btn-edit launch">详情</button>
        </td>
    </tr>
    <% });%>
</script>
<script type="text/javascript">
    $(function () {

        //服务列表查询事件
        function providerList() {
            $.post("${ctxPath}/imanager/insist/providerList", {
                "serviceName": $("#serviceName").val(),
                "group": $("#group").val()
            }, function (data) {
                if (data.success && data.data.length > 0) {
                    $('#providerTable').find("tbody").html(_.template($('#providerTableTemplate').html(), {variable: 'data'})(data.data));
                } else {
                    $("#providerTable").find("tbody").html(" <tr><td colspan=\"6\" style=\"text-align: center;\">暂无信息！</td> </tr>");
                }
            }, "json");
        }

        providerList();

        $("#searchBtn").click(function () {
            providerList();
        });

        $("#resetBtn").click(function () {
            $("#serviceName").val("");
            $("#group").val("");
            providerList();
        });

        //tab页切换事件
        $("#myTab").delegate("a", "click", function () {
            window.location = $(this).attr("href");
        });


    });
</script>